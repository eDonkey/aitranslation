{% extends "public_base.html" %}

{% block title %}Client Dashboard{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center">Welcome, {{ user.username }}</h1>
    <h2 class="text-center mt-4">Your Last 10 Translations</h2>

    <!-- Switch for Human and AI Translations -->
    <div class="text-center mt-4">
        <button id="humanTranslationsBtn" class="btn btn-secondary active">Human Translations</button>
        <button id="aiTranslationsBtn" class="btn btn-secondary">AI Translations</button>
    </div>

    <!-- Human Translations Table -->
    <div id="humanTranslationsTable" class="table-container mt-4">
        <table class="table table-hover table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Created At</th>
                    <th>Original Text</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for translation in translations.human %}
                <tr>
                    <td>{{ translation.id }}</td>
                    <td>{{ translation.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                    <td>{{ translation.original_text }}</td>
                    <td>
                        <span class="badge {% if translation.status == 'Completed' %}bg-success{% else %}bg-warning text-dark{% endif %}">
                            {{ translation.status }}
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- AI Translations Table -->
    <div id="aiTranslationsTable" class="table-container mt-4" style="display: none;">
        <table class="table table-hover table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Created At</th>
                    <th>Original Text</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for translation in translations.ai %}
                <tr>
                    <td>{{ translation.id }}</td>
                    <td>{{ translation.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                    <td>{{ translation.original_text }}</td>
                    <td>
                        <span class="badge {% if translation.status == 'Completed' %}bg-success{% else %}bg-warning text-dark{% endif %}">
                            {{ translation.status }}
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
    // JavaScript to toggle between Human and AI Translations
    document.getElementById('humanTranslationsBtn').addEventListener('click', function () {
        document.getElementById('humanTranslationsTable').style.display = 'block';
        document.getElementById('aiTranslationsTable').style.display = 'none';
        this.classList.add('active');
        document.getElementById('aiTranslationsBtn').classList.remove('active');
    });

    document.getElementById('aiTranslationsBtn').addEventListener('click', function () {
        document.getElementById('humanTranslationsTable').style.display = 'none';
        document.getElementById('aiTranslationsTable').style.display = 'block';
        this.classList.add('active');
        document.getElementById('humanTranslationsBtn').classList.remove('active');
    });
</script>
{% endblock %}